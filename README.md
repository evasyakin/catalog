# catalog

## По задачам

### Сделал
1. Определение категории по url (отказался от частичного seo url, но закоментированный код в CateoryController остался)
2. Получение иерархии категорий для меню (там ещё можно добавить улучшение - группировать запросы поиска подкатегорий по уровням: запрос через where in + разбор на строне ph в нужне subcats)
3. Виртуальные категории
4. Поиск товаров категории, учитывая вложенность и базовые фильтры (ссылаются на поля товара)
5. Базовые фильтры, опции в базовых фильтрах категории (подразумевается их обновление при сохранении товара/категории), типы фильтров
6. Приоритезация (эо может быть рейтинг/настройка) категорий, товаров, фильтров

### Не успел доделать

1. Уникальные фильтры категорий (выбрал вариант отделения от базовых)
2. Значения полей товаров для уникальных фильтров категорий

## Нюасны

### Вывод результат

- Не делал вывод в json, потому что с ним сложнее проверять результат
- Если у категории есть фильтры, то отображаю форму, так было удобней тестить + так больше понимания о хранении опций фильтров
- В конце есть ещё вспомогательный вывод товаров внутри иерархии каталогов и товары категории без фильтров, тоже для тестов

### Директории
- `/app/Core/` - самописные и частично взятые из моего фреймворка вспомогательные классы
- `/app/Catalog/` - модуль каталога
- `/config/` - конфиги
- `/public/` - public директория
- `/views/` - отображения написанные на скорую руку для мануальных тестов

## Запуск

### Данные
- `tests_catalog-1.sql` - Дамп БД, находится в корне
- Базовые фильтры дампе установлены только в категории [8] "Ноутбуки и ультрабуки"
- `.env` - Необходимо создать для environments свойств, пример в файле `.env.example`

### Адреса

- `/` - Корень категорий
- `/category/<cateory.url>` - Категория

### index.php
- `index.php` находится в корне, а не в public, мне так было удобней, в конце хотел продублировать его в public/index.php, но там стили едут, в моем фреймворке это решено (можно из любого каталога вызывать не public часть сайта), не стал здесь реализовывать из-за доолнительных временных затрат
